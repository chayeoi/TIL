# React 스터디 6주차: Redux-Saga

2018년 6월 7일 React 스터디 자료입니다.

이미 Redux-Saga를 시작하기 위한 친절한 공식 문서와 한글 번역본이 나와있습니다. 그렇기 때문에 이 글에서 redux-saga의 사용법 자체에 대해 자세히 설명하기보다는, redux-saga의 핵심 개념을 정리하고 redux-thunk와의 비교를 통해 그 특징을 가볍게 살펴보는 것에 초점을 두겠습니다.

## Redux-Saga가 하는 일: 사이드 이펙트 처리

redux-saga는 **리덕스 앱에서 '사이드 이펙트'를 특별한 방법으로 처리하기 위한 Redux 미들웨어**입니다. 여기서 '사이드 이펙트'라 함은 **우리가 작성한 코드가 외부 세계와 영향을 주고 받는 일**을 일컫습니다. 예를 들어, 어떤 함수가 그 내부에서 비동기적으로 API를 호출한다거나 브라우저 캐시에 접근하고 있다면, 이 함수는 사이드 이펙트를 갖는 것으로 간주됩니다. 그런데 도대체 이런 '사이드 이펙트'가 뭐가 문제길래, 사람들은 리덕스 앱에서 redux-saga와 같은 미들웨어를 사용하여 사이드 이펙트를 별도로 처리해주려 하는 걸까요?

어떤 함수가 사이드 이펙트를 갖고 있다, 즉 외부 세계와 영향을 주고 받는다는 것은 결국 함수의 내부적인 처리 결과가 외부 세계의 상태에 따라 달라질 것이므로 동일한 입력값에 대해 일관된 결과를 보장하지 못한다(순수하지 못하다)는 것을 의미합니다. 이처럼 순수하지 못한 작업은 우리가 작성한 코드를 예측 불가능하게 만들고 이로 인해 해당 코드를 테스트하는 일 역시 어려워지게 됩니다. 리덕스는 이러한 문제가 발생하는 것을 사전에 방지하고자, 애초부터 **스토어의 상태 변화를 기술하는 리듀서는 순수 함수로 작성되어야 한다**는 핵심 원칙을 세웠습니다.

리듀서만큼은 완벽하게 순수 함수로 작성되었다고 해도, 대부분의 경우에 앱의 규모가 커질수록 그 어딘가에서는 사이드 이펙트를 갖는 코드가 생겨날 수 밖에 없을 것입니다. 오늘날의 거의 모든 앱들이 비동기 API 통신을 필요로 하기 때문이죠. 결국 사이드 이펙트를 아예 갖지 않는 앱을 만든다는 것이 사실상 불가능에 가깝다는 것을 알았으므로, 어떻게 해서든 존재할 수 밖에 없는 사이드 이펙트를 효율적으로 처리할 방법이 필요해졌습니다. 이러한 상황 속에서 사이드 이펙트를 처리하기 위한 초창기 미들웨어로 redux-thunk가 생겨났고, 곧이어 redux-thunk가 풀지 못했던 많은 문제를 해결해줄 수 있는 redux-saga가 등장했습니다.