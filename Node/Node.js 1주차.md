# Node.js

## 01 노드에 대해 알아보고 개발 도구 설치하기

### 01-1 노드란 무엇일까?

1. 노드는 웹 서버에 파일을 업로드할 때, 업로드가 완료되기 전까지 웹 서버에서 데이터를 조회한다거나 하는 등의 다른 작업을 할 수 없었던 문제를 해결하기 위해 개발되었다.
2. 노드의 비동기 입출력 방식

* 하나의 요청 처리가 끝날 때까지 기다리지 않고 다른 요청을 동시에 처리할 수 있는 **비동기 입출력 방식** 을 적용

3. 노드에서 구현하는 이벤트 기반 입출력 방식

* 파일 시스템이 이벤트와 함께 콜백 함수를 호출하는 방식을 **이벤트 기반 입출력(Event driven I/O) 모델**이라고 한다.

4. 노드를 더 쉽게 사용할 수 있게 하는 모듈

* 별도의 파일로 만든 **모듈**을 사용하고 싶다면 `require()`함수로 모듈을 호출하면 된다.
* 여러 개의 모듈을 합쳐서 하나의 패키지(Package)로 만들어 두면, 다른 프로그래머들도 **npm 프로그램**으로 손쉽게 패키지를 설치하여 사용할 수 있다.

이상 Node.js의 특징을 요약하면 다음과 같다.

>1. 비동기 입출력 방식
>2. 이벤트 기반 입출력 모델
>3. 모듈과 패키지

### 01-2 개발 도구 설치하기

1. 노드 설치하기

* LTS(Long Term Supported) 버전은 서버 환경에서 안정적으로 동작하도록 지원하는 버전이다. 실제로 서버를 운영할 때는 안정성과 보안이 중요하므로 LTS 버전을 사용하는 것이 좋다.
* Current 버전은 최신 기능을 포함한다. 새로운 기능을 추가하거나 기존 버그들을 우선적으로 수정하여 적용하므로 최신 기능을 사용할 때는 Current 버전을 설치하는 것이 좋다.
* `node -v`: 노드 버전을 표시
* `npm -v`: npm 버전을 표시

## 02 노드 간단하게 살펴보기

### 02-1 첫 번째 노드 프로젝트 만들기

1. 자바스크립트 파일 만들어 실행하기

* 명령 프롬프트에서 노드 실행파일(`node` 명령어)로 자바스크립트 파일을 실행할 수 있다.(`node test.js`)

2. 노드 셸에서 직접 코드 입력하고 실행하기

* 명령 프롬프트 창에서 **⌘ + C**를 눌러 실행중인 프로그램을 종료한 후, `node`만 입력하고 **Enter** 키를 누르면  코드를 바로바로 입력하여 노드를 실행할 수 있다.

### 03-1 콘솔에 로그 뿌리기

1. 노드에서 사용할 수 있는 대표적인 전역 객체들은 다음과 같다.

| 전역 객체 이름 | 설명                      |
| -------- | ----------------------- |
| console  | 콘솔 창에 결과를 보여주는 객체       |
| process  | 프로세스의 실행에 대한 정보를 다루는 객체 |
| exports  | 모듈을 다루는 객체              |

2. console 객체의 대표적인 메소드는 다음과 같다.

| 메소드 설명      | 설명                          |
| ----------- | --------------------------- |
| dir(object) | 자바스크립트 객체의 속성들을 출력한다.       |
| time(id)    | 실행 시간을 측정하기 위한 시작 시간을 기록한다. |
| timeEnd(id) | 실행 시간을 측정하기 위한 끝 시간을 기록한다.  |

3. 시간이 얼마나 걸리는지 알고 싶다면, 해당 코드의 시작과 끝 부분에 **`time()`과 `timeEnd()` 메소드**를 추가한다. 이 두 개의 메소드로 전달되는 파라미터는 문자열로 된 이름인데, 시간이 얼마나 지났는지 체크하는 작업에 하나의 이름을 붙여 구별한다.
4. **`__filename`과 `__dirname` 변수**를 사용하면 실행한 파일의 이름과 패스를 쉽게 확인할 수 있다.

| 변수 이름      | 설명                                       |
| ---------- | ---------------------------------------- |
| __filename | 실행한 파일의 이름을 출력한다. 파일의 전체 패스가 출력된다.       |
| __dirname  | 실행한 파일이 들어 있는 폴더를 출력한다. 폴더의 전체 패스가 출력된다. |

### 02-3 프로세스 객체 간단하게 살펴보기

1. **`process` 객체**는 프로그램을 실행했을 때 만들어지는 프로세스 정보를 다루는 객체이다.
2. **`process` 객체**의 주요 속성과 메소드는 다음과 같다.

| 속성/메소드 이름 | 설명                             |
| --------- | ------------------------------ |
| argv      | 프로세스를 실행할 때 전달되는 파라미터(매개변수) 정보 |
| env       | 환경 변수 정보                       |
| exit()    | 프로세스를 끝내는 메소드                  |

3. `process` 객체에 들어 있는 `argv` 속성은 배열 객체이며 파일을 실행하기만 해도 `node` 명령과 파일 패스가 파라미터 값으로 들어간다는 것을 알 수 있다.
4. `process.env` 속성에는 **사용자 정의 환경 변수(user variables)**만 들어 있으므로 OS와 같은 **시스템 환경 변수(system variables)**에 접근할 수 없다.
5. **사용자 정의 환경 변수**란 현재 사용 중인 윈도우 사용자 계정에만 적용되는 값을 말하며, **시스템 환경 변수**는 모든 윈도우 사용자 계정에 적용되는 값을 말한다.

### 02-4 노드에서 모듈 사용하기

1. 메인 파일의 코드 중에서 독립적인 기능은 별도 파일로 분리할 수 있으며, 메인 파일에서는 전체적인 실행 순서나 흐름만을 제어한다. 이렇게 분리된 파일을 **모듈**이라고 한다.
2. 노드는 CommonJs의 표준 스펙을 따라 모듈을 사용할 수 있게 하는데, 이 과정에서 **`exports` 전역 객체**를 사용한다.
3. `exports` 객체의 속성으로 변수나 함수를 지정하면 그 속성을 main.js와 같은 메인 자바스크립트 파일에서 불러와 사용할 수 있다.
4. 모듈을 불러올 때는 `require()` 메소드를 사용하며, 모듈로 만들어 둔 파일의 이름을 이 메소드의 파라미터로 전달한다.
5. `exports` 이외에 `module.exports`를 사용할 수도 있다.  `exports`에는 여러 개의 변수나 함수를 각각의 속성으로 추가할 수 있고, 이에 반해 `module.exports`에는 하나의 변수나 함수 또는 객체를 직접 할당한다.
6. 외장 모듈 사용하기

* 다른 사람이 만들어 놓은 모듈을 **외장 모듈**이라고 한다.
* **npm 패키지**를 사용하면 다른 사람이 만들어 올려놓은 패키지를 다운로드하여 설치할 수 있다.
* 직접 만든 모듈이 아니라면(내장 또는 외장 모듈) 상대 패스다 아닌 모듈의 이름만 지정해서 불러온다.
* `npm install` 명령어에는 지역(local) 설치와 전역(global) 설치 옵션이 존재한다. 옵션을 별도로 지정하지 않으면 지역으로 설치되며 프로젝트 디렉터리 내에 node_modules 디렉터리가 자동 생성되고 그안에 설치한 패키지가 설치된다. 지역으로 설치된 패키지는 해당 프로젝트 내에서만 사용할 수 있다.
* 전역에 패키지를 설치하려면 `-g` 옵션을 지정한다. 전역으로 설치된 패키지는 전역에서 참조가 가능하게 된다. 예를 들어 npm의 경우 모든 프로젝트가 사용하기 때문에 지역으로 설치하는 것보다 전역에 설치하는 것이 일반적이다.
* Node.js 프로젝트에서는 많은 의존 패키지를 사용하게 되고 패키지의 버전도 빈번하게 업데이트되기 때문에 프로젝트가 의존하고 있는 패키지의 관리가 필요하다. npm은 **package.json** 파일을 통해서 프로젝트 정보와 패키지의 의존성(dependency)을 관리한다. 이미 작성된 package.json은 팀 내에 배포하여 동일한 개발 환경을 빠르게 구축할 수 있는 장점을 가진다.
* package.json을 생성하기 위해서는 `npm init` 명령어를 사용한다.
* `dependencies`에는 해당 프로젝트가 의존하는 패키지들의 이름과 버전을 명시한다. `npm install` 명령어에 `--save` 옵션을 사용하면 패키지 설치와 함께 package.json의 dependencies에 설치된 패키지와 버전이 기록된다.

> [npm@5](http://blog.npmjs.org/post/161081169345/v500)부터 `--save`는 기본옵션이 되었다. `--save` 옵션을 사용하지 않더라도 모든 install 명령은 package.json의 dependencies에 설치된 패키지와 버전을 기록한다. 기존의 `--save-dev`은 변경되지 않았다.

### 02-5 간단한 내장 모듈 사용하기

1. 미리 포함되어 있는 모듈을 **내장 모듈**이라고 한다.
2. 시스템 정보를 알려주는 os 모듈

| 메소드 이름              | 설명                             |
| ------------------- | ------------------------------ |
| hostname()          | 운영체제의 호스트 이름을 알려준다.            |
| totalmem()          | 시스템의 전체 메모리 용량을 알려준다.          |
| freemem()           | 시스템에서 사용 가능한 메모리 용량을 알려준다.     |
| cpus()              | CPU 정보를 알려준다.                  |
| networkInterfaces() | 네트워크 인터페이스 정보를 담은 배열 객체를 반환한다. |

3. 파일 패스를 다루는 path 모듈

| 메소드 이름     | 설명                                       |
| ---------- | ---------------------------------------- |
| join()     | 여러 개의 이름들을 모두 합쳐 하나의 파일 패스로 만들어준다. 파일 패스를 완성할 때 구분자 등을 알아서 조정한다. |
| dirname()  | 파일 패스에서 디렉터리 이름을 반환한다.                   |
| basename() | 파일 패스에서 파일의 확장자를 제외한 이름을 반환한다.           |
| extname()  | 파일 패스에서 파일의 확장자를 반환한다.                   |