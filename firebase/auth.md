# Firebase auth

Firebase Auth 인스턴스의 현재 상태를 추적할 때 권장하는 방법은 리스너(자바스크립트에서는 '관찰자'라고도 합니다)를 사용하는 것이다. Auth 리스너는 Auth 개체에 유의미한 사건이 발생할 때마다 통지를 받는다.

다음과 같은 경우에 Auth 리스너가 알림을 받는다.

* Auth 객체가 초기화를 완료하고 사용자가 이미 이전 세션을 통해 로그인해 있거나 ID 제공업체의 로그인 흐름에서 리디렉션되었을 때
* 사용자가 로그인할 때(현재 사용자가 설정될 때)
* 사용자가 로그아웃할 때(현재 사용자가 null이 될 때)
* 현재 사용자의 액세스 토큰이 갱신될 때. 갱신이 일어나는 상황은 다음과 같다.
  * 액세스 토큰이 만료되었을 때: 흔한 경우이다. 갱신 토큰을 사용해 유효한 토큰을 새로 가져온다.
  * 사용자가 비밀번호를 변경할 때: Firebase가 새 액세스 및 갱신 토큰을 발급하고 기존 토큰을 만료시킨다. 이때 보안상의 이유로 자동으로 사용자의 토큰이 만료되고 사용자가 모든 기기에서 로그아웃된다.
  * 사용자가 재인증을 할 때: 일부 작업은 사용자의 인증 정보가 최근에 발급된 경우에만 진행할 수 있다. 이런 작업으로는 계정 삭제, 기본 이메일 주소 설정, 비밀번호 변경 등이 있다. 사용자를 로그아웃 처리하고 다시 로그인 처리할 필요는 없고 사용자에게서 새로운 인증 정보를 받아서 User 객체의 reauthenticate 메소드에 전달하면 된다.
